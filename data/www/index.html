<!DOCTYPE html>
<html lang="en" data-theme="dark">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="style.css">
    <title>Master Control</title>
</head>

<body>
    <header
        style="display: flex; justify-content: center; align-items: center; flex-direction: column; padding-bottom: 0 !important;">
        <img style="display: block; margin-left: auto; margin-right: auto;" controls="controls" width="256" height="128"
            src="logo">
    </header>
    <main class="container">
        <table>
            <tr>
                <td style="text-align: center">
                    <form action="/pub">
                        <h4>COMANDO</h4>

                        <div class="grid">
                            <label for="cmd">
                                Comando
                                <input id="cmd" type="text" name="cmd" value="{}"/>
                            </label>
                        </div>

                        <input  type="submit" value="Enviar">

                    </form>
                    <form action="/get">
                        <h4>ESTADO DEL GATEWAY</h4>

                        <div class="grid">
                            <label for="status">
                                Status:
                                <p id="status">%STATUS%</p>
                            </label>
                        </div>

                        <div class=""grid>
                            <label for="nodos">    
                                Tabla de nodos
                                <p id="nodos">%NODOS%</p>
                            </label>
                        </div>

                        <h4>CONEXIONES</h4>

                        <div class="grid">
                            <label for="cbox1">
                                GPRS
                                <input id="cbox1" type="checkbox" name="gprs" value="on" />
                            </label>
                            <label for="cbox2">
                                WiFi
                                <input id="cbox2" type="checkbox" name="wifi" value="on" />
                            </label>
                        </div>

                        <h5>Wifi:</h5>

                        <div class="grid">
                            <label for="ssid">
                                SSID
                                <input id="ssid" maxlength="16" name="ssid" required="" size="25" type="text">
                            </label>
                            <label for="pass">
                                Password
                                <input id="pass" maxlength="16" name="pass" required="" size="25" type="password" />
                            </label>
                        </div>
                        
                        <h5>GPRS:</h5>

                        <div class="grid">
                            <label for="apn">
                                APN
                                <input id="apn" maxlength="16" name="ssid" required="" size="25" type="text">
                            </label>
                        </div>

                        <h4>MQTT server</h4>

                        <div class="grid">
                            <label for="host">
                                Host
                                <input id="host" maxlength="16" name="ssid" required="" size="25" type="text">
                            </label>
                            <label for="port">
                                Puerto
                                <input id="port" maxlength="16" name="ssid" required="" size="25" type="text">
                            </label>
                        </div>

                        <div class=""grid>
                            <label for="user">
                                Usuario
                                <input id="user" maxlength="16" name="ssid" required="" size="25" type="text">
                            </label>
                            <label for="pass">
                                Contrase√±a
                                <input id="pass" maxlength="16" name="ssid" required="" size="25" type="password">
                            </label>
                        </div>

                        <p id="w0">%W0%</p>
                        <p id="w1">%W1%</p>
                        <p id="w2">%W2%</p>
                        <p id="w3">%W3%</p>
                        <p id="w4">%W4%</p>
                        <p id="w5">%W5%</p>

                        <input  type="submit" value="Aceptar">
                        <tr>
                </td>
            </tr>
            </tbody>
            </form>
            </tr>
        </table>
    </main>
</body>

<script>
    setInterval(function () {
        var xhttp = new XMLHttpRequest();
        xhttp.onreadystatechange = function () {
            if (this.readyState == 4 && this.status == 200) {
                var a = this.responseText.split(';');

                document.getElementById("id_").innerHTML = a[0];
                document.getElementById("nodos").innerHTML = a[1];
                document.getElementById("w0").innerHTML = a[2];
                document.getElementById("w1").innerHTML = a[3];
                document.getElementById("w2").innerHTML = a[4];
                document.getElementById("w3").innerHTML = a[5];
                document.getElementById("w4").innerHTML = a[6];
                document.getElementById("w5").innerHTML = a[7];
                document.getElementById("l3_").innerHTML = a[8];
                document.getElementById("status").innerHTML = a[8];
                document.getElementById("cantnodos").innerHTML = a[8];
            }
        };
        xhttp.open("GET", "/allvalues", true);
        xhttp.send();
    }, 50);
</script>

</html>